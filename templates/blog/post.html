{% extends 'blog/base.html' %}
{% block content %}
    {% load i18n %}

<div class="post" style="position: relative">
  <h1>
      <span>{{ post.name }} <p>{% trans 'Author' %}:
          {% if post.user.is_moderator %}
              <a  style="color: #e85353" href="{% url 'user:profile' post.user.user.id %}">{{ post.user }}</a>
      {% else %}
              <a  href="{% url 'user:profile' post.user.user.id %}">{{ post.user }}</a>
      {% endif %}
      </p> </span>
  </h1>
  <h3>{{ post.description }}</h3>
  <h4>{{ post.text }}</h4>
        {%if request.user == post.user.user %}
            <a href="{% url 'blog:update' post.id %}" class="btn btn-sm btn-info"
                style="width: 29%">{% trans 'Update' %}</a>
            <a href="{% url 'blog:delete' post.id %}" class="btn btn-sm btn-danger"
                style="width: 29%">{% trans 'Delete' %}</a>
            <span style="bottom: 0;">ðŸ—¨ {{ post.number_of_comments }}</span>
            <a class="btn btn-sm btn-default"
               style="position: absolute; right: 0; color: green; font-size: 20px">+</a>
            <a class="btn btn-sm btn-default"
               style="position: absolute; right: 30px; color: red; font-size: 20px">-</a>
               <span style="position: absolute; right: 60px; top: 10px;">{{ post.rating }}</span>
        {% else %}
            <span style="bottom: 0;">ðŸ—¨ {{ post.number_of_comments }}</span>
            <a class="btn btn-sm btn-default"
               style="position: absolute; right: 0; bottom: 0; color: green; font-size: 20px">+</a>
            <a class="btn btn-sm btn-default"
               style="position: absolute; right: 30px; bottom: 0; color: red; font-size: 20px">-</a>
            <span style="position: absolute; right: 60px; bottom: 7px;">{{ post.rating }}</span>
        {%endif%}
    <br>
</div>

  <a href="{% url 'blog:create_comment' post.id %}" class="btn btn-sm btn-success"
     style="margin-left: 10px; display: inline-block;">{% trans 'Leave a comment' %}</a>

    {% for comment in comments %}
        <div class="post" style="margin-bottom: 0">
            <div style="position: relative">
                <a id="name" href="{% url 'user:profile' comment.user.user.id %}">{{ comment.user }}</a> {{comment.publication_date}}
                <a href="{% url 'blog:home' %}"
                   class="btn btn-sm btn-default"
                   style="position: absolute; right: 0; color: green; font-size: 20px">+</a>
                <a href="{% url 'blog:home' %}"
                   class="btn btn-sm btn-default"
                   style="position: absolute; right: 30px; color: red; font-size: 20px">-</a>
                <span style="position: absolute; right: 60px; top: 7px;">{{ comment.rating }}</span>
            </div>
            <h5>{{comment.text}}</h5>
            <a id="name" href="{% url 'blog:reply' post.id comment.id %}">{% trans 'Reply' %}</a>
            {% for reply in comment.replies.all %}
                <div class="post" style="margin-bottom: 0">
                <a id="name" href="{% url 'user:profile' reply.user.user.id %}">{{ reply.user }}</a> {{reply.publication_date}}
                <h5>{{reply.text}}</h5>
                </div>
            {% endfor %}
        </div>
    {% endfor %}

{% endblock %}
